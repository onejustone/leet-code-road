# 完全二叉树应用-堆

完全二叉树最典型的应用就是 **堆**。反过来说，堆是一种特殊的完全二叉树。

最小堆-MinHeap： 所有父结点的值都比子结点要小。
最大堆-MaxHeap： 所有父结点的值都比子结点要大。

堆主要可以用于在 `O(1)` 的时间内获取堆中的最大值或最小值。而
线性数据结构（例如Arrays或LinkedList）需要在 `O(n)` 的时间内获得该值；非线性数据结构（例如 `Binary Search Trees（BST）`）则需要 `O(log n)` 的时间。

下面是堆中一些操作的时间复杂度：

- 获取最大/小值：O(1)
- 插入一个元素：O(log n)
- 删除一个元素：O(log n)

因为堆的特性使得我们可以快速访问高优先级的元素（比如最大/最小值），所以堆的一个常见用途便是 **优先队列**。

比如在 `Dijkstra’s Algorithm` 和 `Huffman Coding` 中都会使用到优先队列。

下面是堆的一些实际运用场景：

- 操作系统的进程调度
- 生产者－消费者模型可以使用堆来实现，以使消费者首先访问较高优先级的元素。 它用于实施“阻塞优先级队列”。
- 在顺序存储结构，比如数组中查找第`K`大/小元素，或者在堆排序和图有关的算法，比如 Dijkstra’s Algorithm 和 最小生成树中查找最短路径。

## 堆的实现-数组

首先使用线性顺序存储结构，即数组来构建堆(最小堆-MinHeap)，也可使用非线性顺序存储结构（比如链表），但是一般使用数组来构建堆。

最小堆的特性是(如果下标是从 `0` 开始的)：

- 所有的父结点都比子结点要小；
- 若，父结点编号为 `k`: 左儿子编号为 = `2k + 1`; 右儿子编号为 `2k + 2`；
- 若，儿子（左儿子或右儿子）编号为 `x` : 父亲结点编号就是 `Math.ceil(x/2) - 1`；
- 已知，完全二叉树有 `n` 个结点，则完全二叉树的高度为 `log n`;

我们先实现一个最小堆：

[min-heap](../../../code/heap/min-heap.ts ':include :type=code typescript')

像这样支持插入元素和寻找最大（小）值元素堆数据结构称为优先队列。

### 堆排序

如上实现堆排序的过程就是每次从堆顶取出最小(大)的那个数，然后将堆底的最后一个元素放在堆顶，再对堆进行向下调整。
堆排序的时间复杂度是：O(NlogN)。

## ref

[implementing-heaps-in-javascript](https://blog.bitsrc.io/implementing-heaps-in-javascript-c3fbf1cb2e65)
