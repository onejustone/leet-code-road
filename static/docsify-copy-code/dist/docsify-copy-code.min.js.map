{"version":3,"file":"docsify-copy-code.min.js","sources":["../node_modules/style-inject/dist/style-inject.es.js","../src/index.js"],"sourcesContent":["function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","// Dependencies\n// =============================================================================\n// eslint-disable-next-line no-unused-vars\nimport styles from './styles.css';\n\n\n// Plugin\n// =============================================================================\nfunction docsifyCopyCode(hook, vm) {\n    hook.doneEach(function() {\n        const codeBlocks = Array.apply(null, document.querySelectorAll('pre[v-pre]'));\n\n        codeBlocks.forEach(function(element, i, obj) {\n            const button = document.createElement('button');\n\n            button.appendChild(document.createTextNode('Click to copy'));\n            button.classList.add('docsify-copy-code-button');\n\n            if (vm.config.themeColor) {\n                button.style.background = vm.config.themeColor;\n            }\n\n            button.addEventListener('click', function(event) {\n                const range = document.createRange();\n                const codeBlock = element.querySelector('code');\n\n                let selection = window.getSelection();\n\n                range.selectNode(codeBlock);\n                selection.removeAllRanges();\n                selection.addRange(range);\n\n                try {\n                    // Now that we've selected the anchor text, execute the copy command\n                    const successful = document.execCommand('copy');\n\n                    if (successful) {\n                        button.classList.add('success');\n                        setTimeout(function() {\n                            button.classList.remove('success');\n                        }, 1000);\n                    }\n                } catch (err) {\n                    button.classList.add('error');\n                    setTimeout(function() {\n                        button.classList.remove('error');\n                    }, 1000);\n                }\n\n                selection = window.getSelection();\n\n                if (typeof selection.removeRange === 'function') {\n                    selection.removeRange(range);\n                } else if (typeof selection.removeAllRanges === 'function') {\n                    selection.removeAllRanges();\n                }\n            });\n\n            element.appendChild(button);\n        });\n    });\n}\n\n// Deprecation warning for v1.x: stylesheet\nif (document.querySelector('link[href*=\"docsify-copy-code\"]')) {\n    // eslint-disable-next-line\n    console.warn('[Deprecation] Link to external docsify-copy-code stylesheet is no longer necessary.');\n}\n\n// Deprecation warning for v1.x: init()\nwindow.DocsifyCopyCodePlugin = {\n    init: function() {\n        return function(hook, vm) {\n            hook.ready(function() {\n                // eslint-disable-next-line\n                console.warn('[Deprecation] Manually initializing docsify-copy-code using window.DocsifyCopyCodePlugin.init() is no longer necessary.');\n            });\n        };\n    }\n};\n\nwindow.$docsify = window.$docsify || {};\nwindow.$docsify.plugins = [docsifyCopyCode].concat(window.$docsify.plugins || []);\n"],"names":["css","ref","insertAt","document","head","getElementsByTagName","style","createElement","type","firstChild","insertBefore","appendChild","styleSheet","cssText","createTextNode","querySelector","warn","window","DocsifyCopyCodePlugin","hook","vm","ready","$docsify","plugins","doneEach","Array","apply","querySelectorAll","forEach","element","i","obj","button","classList","add","config","themeColor","background","addEventListener","event","range","createRange","codeBlock","selection","getSelection","selectNode","removeAllRanges","addRange","execCommand","remove","err","removeRange","concat"],"mappings":";;;;;;;0BAAA,SAAqBA,EAAKC,QACX,IAARA,IAAiBA,MACtB,IAAIC,EAAWD,EAAIC,SAEnB,GAAKF,GAA2B,oBAAbG,SAAnB,CAEA,IAAIC,EAAOD,SAASC,MAAQD,SAASE,qBAAqB,QAAQ,GAC9DC,EAAQH,SAASI,cAAc,SACnCD,EAAME,KAAO,WAEI,QAAbN,GACEE,EAAKK,WACPL,EAAKM,aAAaJ,EAAOF,EAAKK,YAKhCL,EAAKO,YAAYL,GAGfA,EAAMM,WACRN,EAAMM,WAAWC,QAAUb,EAE3BM,EAAMK,YAAYR,SAASW,eAAed,koBCyC1CG,SAASY,cAAc,4CAEfC,KAAK,uFAIjBC,OAAOC,4BACG,kBACK,SAASC,EAAMC,KACbC,MAAM,mBAECL,KAAK,gIAM7BC,OAAOK,SAAWL,OAAOK,aACzBL,OAAOK,SAASC,SA1EhB,SAAyBJ,EAAMC,KACtBI,SAAS,WACSC,MAAMC,MAAM,KAAMvB,SAASwB,iBAAiB,eAEpDC,QAAQ,SAASC,EAASC,EAAGC,OAC9BC,EAAS7B,SAASI,cAAc,YAE/BI,YAAYR,SAASW,eAAe,oBACpCmB,UAAUC,IAAI,4BAEjBd,EAAGe,OAAOC,eACH9B,MAAM+B,WAAajB,EAAGe,OAAOC,cAGjCE,iBAAiB,QAAS,SAASC,OAChCC,EAAQrC,SAASsC,cACjBC,EAAYb,EAAQd,cAAc,QAEpC4B,EAAY1B,OAAO2B,iBAEjBC,WAAWH,KACPI,oBACAC,SAASP,OAIIrC,SAAS6C,YAAY,YAG7Bf,UAAUC,IAAI,sBACV,aACAD,UAAUgB,OAAO,YACzB,MAET,MAAOC,KACEjB,UAAUC,IAAI,oBACV,aACAD,UAAUgB,OAAO,UACzB,KAK8B,qBAFzBhC,OAAO2B,gBAEEO,cACPA,YAAYX,GACsB,mBAA9BG,EAAUG,mBACdA,sBAIVnC,YAAYqB,SAwBYoB,OAAOnC,OAAOK,SAASC"}